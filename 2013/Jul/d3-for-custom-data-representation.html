<!DOCTYPE html>
<html lang="en">
<head>
        <title>D3 for custom data representation</title>
        <meta charset="utf-8" />
        <link rel="stylesheet" href="../../theme/css/main.css" type="text/css" />
                <link href="http://zombiecalypse.github.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Zombiecalypse the Blog Atom Feed" />
                
        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="../../css/ie.css"/>
                <script src="../../js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="../../css/ie6.css"/><![endif]-->

</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="../../">Zombiecalypse the Blog </a></h1>
                <nav><ul>
                                                                    <li><a href="../../pages/about-me.html">About&nbsp;me</a></li>
                                                                    <li ><a href="../../category/political-theory.html">Political Theory</a></li>
                                    <li class="active"><a href="../../category/programming.html">Programming</a></li>
                                </ul></nav>
        </header><!-- /#banner -->
        <section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="../../2013/Jul/d3-for-custom-data-representation.html" rel="bookmark"
           title="Permalink to D3 for custom data representation">D3 for custom data&nbsp;representation</a></h1>
          </header>

    <div class="entry-content">
      <footer class="post-info">
        <abbr class="published" title="2013-07-14T00:00:00">
                Sun 14 July 2013
        </abbr>

                <address class="vcard author">
                By <a class="url fn" href="../../author/zombiecalypse.html">Zombiecalypse</a>
        </address>
        <p>In <a href="../../category/programming.html">Programming</a>. </p>

</footer><!-- /.post-info -->      <script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>

<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>

<script type="text/javascript">
// Generated by CoffeeScript 1.4.0
(function() {

  $(document).ready(function() {
    return $.getJSON('/static/images/year_data.json').done(function(info) {
      var arc, chart, scale_day, scale_minute, scale_month;
      scale_day = d3.scale.linear().domain([0, 31]).range([0, 2 * Math.PI]);
      scale_minute = d3.scale.linear().domain([0, 24 * 60]).range([0, scale_day(1) - scale_day(0) - Math.PI / 180]);
      scale_month = d3.scale.linear().domain([0, 12]).range([50, 200]);
      chart = d3.select("#graph").append("svg").attr("width", 500).attr("height", 500);
      arc = d3.svg.arc().innerRadius(function(d) {
        return scale_month(d[0] - 1) + 5;
      }).outerRadius(function(d) {
        return scale_month(d[0]);
      }).startAngle(function(d) {
        return scale_day(d[1]) + scale_minute(d[2] * 60 + d[3] - 30);
      }).endAngle(function(d) {
        return scale_day(d[1]) + scale_minute(d[2] * 60 + d[3]);
      });
      return chart.selectAll("path").data(info).enter().append("path").attr("d", arc).attr("transform", "translate(250, 250)").attr("fill", function(d) {
        if (d[4] === 1) {
          return "blue";
        } else {
          return "red";
        }
      });
    });
  });

}).call(this);
</script>

<p>Sometimes we have some data and all we need to do to make other people
understand the significance is to make a simple bar chart once and save
it as an image to be done with&nbsp;it.</p>
<p>Sometimes it&#8217;s not. Sometimes the data changes by the minute. Sometimes
the well-known chart types don&#8217;t quite cut it. Sometimes the data is
best animated instead of displayed as a static image to allow for&nbsp;exploration.</p>
<p>In all these cases, you should give <a href="http://d3js.org/">D3.js</a> a spin.
D3 is a javascript library that gives many utilities to handle updating
data, representing data in non-standard ways,&nbsp;&#8230;.</p>
<p>Here for example we can plot a year worth of data points if some event
has happened (reliability of connection to the internet maybe?). The
innermost circle is january, the days of the month are clockwise.
As we can see the event occured less in the beginning of the year and
most often in 2 day blocks 7 days&nbsp;appart.</p>
<div id="graph"> </div>

<p>Here the <a href="http://coffeescript.org/">coffeescript</a>&nbsp;source:</p>
<div class="codehilite"><pre><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span> <span class="nf">-&gt;</span>
  <span class="nx">$</span><span class="p">.</span><span class="nx">getJSON</span><span class="p">(</span><span class="s">&#39;data.json&#39;</span><span class="p">).</span><span class="nx">done</span> <span class="nf">(info) -&gt;</span>
    <span class="nv">scale_day = </span><span class="nx">d3</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">linear</span><span class="p">()</span>
                    <span class="p">.</span><span class="nx">domain</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">31</span><span class="p">])</span>
                    <span class="p">.</span><span class="nx">range</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="o">*</span><span class="nb">Math</span><span class="p">.</span><span class="nx"><span class="caps">PI</span></span><span class="p">])</span>
    <span class="nv">scale_minute = </span><span class="nx">d3</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">linear</span><span class="p">()</span>
                    <span class="p">.</span><span class="nx">domain</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">24</span><span class="o">*</span><span class="mi">60</span><span class="p">])</span>
                    <span class="p">.</span><span class="nx">range</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="nx">scale_day</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">-</span><span class="nx">scale_day</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">-</span><span class="nb">Math</span><span class="p">.</span><span class="nx"><span class="caps">PI</span></span><span class="o">/</span><span class="mi">180</span><span class="p">])</span>
    <span class="nv">scale_month = </span><span class="nx">d3</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">linear</span><span class="p">()</span>
                    <span class="p">.</span><span class="nx">domain</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">12</span><span class="p">])</span>
                    <span class="p">.</span><span class="nx">range</span><span class="p">([</span><span class="mi">50</span><span class="p">,</span> <span class="mi">200</span><span class="p">])</span>
    <span class="nv">chart = </span><span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s">&quot;body&quot;</span><span class="p">)</span>
       <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s">&quot;svg&quot;</span><span class="p">)</span>
       <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s">&quot;width&quot;</span><span class="p">,</span> <span class="mi">500</span><span class="p">)</span>
       <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s">&quot;height&quot;</span><span class="p">,</span> <span class="mi">500</span><span class="p">)</span>
    <span class="nv">arc = </span><span class="nx">d3</span><span class="p">.</span><span class="nx">svg</span><span class="p">.</span><span class="nx">arc</span><span class="p">()</span>
              <span class="p">.</span><span class="nx">innerRadius</span><span class="p">(</span><span class="nf">(d) -&gt;</span> <span class="nx">scale_month</span><span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="mi">5</span><span class="p">)</span>
              <span class="p">.</span><span class="nx">outerRadius</span><span class="p">(</span><span class="nf">(d) -&gt;</span> <span class="nx">scale_month</span><span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
              <span class="p">.</span><span class="nx">startAngle</span><span class="p">(</span><span class="nf">(d) -&gt;</span> <span class="nx">scale_day</span><span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">+</span> <span class="nx">scale_minute</span><span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">*</span><span class="mi">60</span><span class="o">+</span><span class="nx">d</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">-</span><span class="mi">30</span><span class="p">))</span>
              <span class="p">.</span><span class="nx">endAngle</span><span class="p">(</span><span class="nf">(d) -&gt;</span> <span class="nx">scale_day</span><span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">+</span> <span class="nx">scale_minute</span><span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">*</span><span class="mi">60</span><span class="o">+</span><span class="nx">d</span><span class="p">[</span><span class="mi">3</span><span class="p">]))</span>

    <span class="nx">chart</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s">&quot;path&quot;</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="nx">info</span><span class="p">).</span><span class="nx">enter</span><span class="p">()</span>
         <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s">&quot;path&quot;</span><span class="p">)</span>
         <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s">&quot;d&quot;</span><span class="p">,</span> <span class="nx">arc</span><span class="p">)</span>
         <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s">&quot;transform&quot;</span><span class="p">,</span> <span class="s">&quot;translate(250, 250)&quot;</span><span class="p">)</span>
         <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s">&quot;fill&quot;</span><span class="p">,</span> <span class="nf">(d) -&gt;</span> 
           <span class="k">if</span> <span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>
             <span class="k">return</span> <span class="s">&quot;blue&quot;</span>
           <span class="k">else</span>
             <span class="k">return</span> <span class="s">&quot;red&quot;</span><span class="p">)</span>
</pre></div>


<p>I got started by reading the highly recommendable <a href="http://chimera.labs.oreilly.com/books/1230000000345/">Interactive Data Visualization for the&nbsp;Web</a></p>
    </div><!-- /.entry-content -->
    
  </article>
</section>
        <section id="extras" class="body">
                        <div class="blogroll">
                        <h2>blogroll</h2>
                        <ul>
                                                    <li><a href="http://docs.notmyidea.org/alexis/pelican/">Pelican</a></li>
                                                    <li><a href="http://python.org">Python.org</a></li>
                                                </ul>
                </div><!-- /.blogroll -->
                                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="http://zombiecalypse.github.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>
                            
                                                    <li><a href="http://twitter.com/zombiecalypse">twitter</a></li>
                                                    <li><a href="http://github.com/zombiecalypse">github</a></li>
                                                </ul>
                </div><!-- /.social -->
                </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>